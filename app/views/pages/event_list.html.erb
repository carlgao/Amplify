
<style type="text/css">

    .event_list{

    margin: 10px;

}

.eb_event_list_item{

  padding-top: 20px;

  padding-bottom: 20px;

}

.eb_event_list_title{

  display:block;

  padding-left: 20px;

  width: 400px;

  overflow: hidden;

  font-size: larger;

}

.eb_event_list_date{

  position: absolute;

  left: 30px;

}

.eb_event_list_time{

  position: absolute;

  left: 175px;

}

.eb_event_list_location{

  position: absolute;

  left: 250px;

}



</style>

<script type='text/javascript'>

         jQuery(window).ready(function(){  
            //jQuery("#btnInit").click(initiate_geolocation);  
             initiate_geolocation();
        });  
  
        function initiate_geolocation() {  
            navigator.geolocation.getCurrentPosition(handle_geolocation_query);  
        }  
  
        function handle_geolocation_query(position){  
            console.log('Lat: ' + position.coords.latitude + ' ' +  
                  'Lon: ' + position.coords.longitude);  

        Eventbrite({'app_key': "CLKWW6EUW2BJSOK4V2", 'user_key':"131598079919974107092"}, function(eb_client){ //eb_client interaction goes here... 
        // parameters to pass to the API
            var params = {'within': "10", 'latitude': position.coords.latitude, 'longitude': position.coords.longitude};
            // make a client request, provide another callback to handle the response data
            eb_client.event_search( params, function( response ){
              var table = $("#table");
              console.log(table);
              for (e in response.events) {
                if (e > 0) {
                  console.log( response.events[e] );
                  console.log(response.events[e].event);
                  t = response.events[e].event.title;
                  btn = $("<button>");
                  btn.html(t);
                  btn.addClass("btn");
                  btn.addClass("primary");
                  var eventItem = $("<tr>");
                  var a = $("<a>");
                  a.attr("href", "/");
                  a.append(btn);
                  eventItem.append(a);
                  //eventItem.append('<a href="/">' + btn + "</a>");
                  console.log(eventItem);
                  table.append(eventItem);
                  console.log(table);
                  //console.log(response.events[e].event.venue);
                  //console.log(response.events[e].event.venue.name);
                }

              }
              }); 
            });
        }  

        //$.ajax({ type: "GET",url: "http://www.eventbrite.com/json/event_search?app_key=5HWLFDG4ZMAT4HSRLW&keywords=super%20fun",dataType: "jsonp", success: readData(data) } )
        console.log("asdff");
        /*var url = "https://www.eventbrite.com/json/event_search?app_key=CLKWW6EUW2BJSOK4V2&keywords=super%20fun";
$.getJSON(url, function (data) {
success: readData(data)
});
function readData(data) {
    alert(data[0].FirstName);
}*/


        /*$.ajax({
          url: "https://www.eventbrite.com/json/event_search?app_key=CLKWW6EUW2BJSOK4V2&keywords=super%20fun",
          type: "GET",
          dataType: "json"
        })
        .success(function(response) {
          console.log(response);
        })
        ;*/
        

</script>



<h1>Listing requests</h1>

<table>
  <tr>
    <th>Name</th>
    <th>Hotness</th>
  </tr>
</table>


</body>

</html>

